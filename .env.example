# Configurações de Segurança Obrigatórias para Produção
# Este arquivo documenta todas as configurações críticas que devem ser aplicadas

# =============================================================================
# CONFIGURAÇÕES DO SUPABASE DASHBOARD (MANUAIS)
# =============================================================================

# 1. AUTHENTICATION SETTINGS
# Acesse: https://supabase.com/dashboard/project/ltqhujliyocybuwcmadf/auth/providers
SUPABASE_AUTH_LEAKED_PASSWORD_PROTECTION=true  # ✅ OBRIGATÓRIO
SUPABASE_AUTH_OTP_EXPIRY=300                   # ✅ OBRIGATÓRIO (5-10 minutos)
SUPABASE_AUTH_MIN_PASSWORD_LENGTH=8            # ✅ RECOMENDADO

# 2. DATABASE SETTINGS
# Acesse: https://supabase.com/dashboard/project/ltqhujliyocybuwcmadf/database/extensions
SUPABASE_EXTENSIONS_SCHEMA=extensions          # ✅ OBRIGATÓRIO (não usar 'public')

# 3. SECURITY SETTINGS
# Acesse: https://supabase.com/dashboard/project/ltqhujliyocybuwcmadf/settings/database
SUPABASE_RLS_ENABLED=true                      # ✅ OBRIGATÓRIO
SUPABASE_SECURITY_DEFINER_VIEWS=false          # ✅ OBRIGATÓRIO (remover se existir)

# =============================================================================
# CONFIGURAÇÕES DE PRODUÇÃO
# =============================================================================

# Site URL e Redirect URLs
# Acesse: https://supabase.com/dashboard/project/ltqhujliyocybuwcmadf/auth/url-configuration
SUPABASE_SITE_URL=https://seu-dominio.com.br
SUPABASE_REDIRECT_URLS=https://seu-dominio.com.br,https://preview-url.lovable.app

# =============================================================================
# CHECKLIST DE DEPLOY SEGURO
# =============================================================================

# ✅ 1. Proteção de Senha Vazada habilitada
# ✅ 2. OTP configurado para 5-10 minutos
# ✅ 3. Extensions movidas para schema dedicado
# ✅ 4. Security Definer Views removidas ou revisadas
# ✅ 5. RLS habilitado em todas as tabelas sensíveis
# ✅ 6. Site URL e Redirect URLs configurados
# ✅ 7. Logs de auditoria implementados
# ✅ 8. Validação de sessão ativa
# ✅ 9. Sanitização de dados implementada
# ✅ 10. Headers de segurança configurados

# =============================================================================
# MONITORAMENTO CONTÍNUO
# =============================================================================

# Verificações automáticas implementadas:
# - Monitor de segurança em tempo real
# - Verificação periódica de configurações
# - Alertas automáticos para problemas críticos
# - Dashboard de saúde de segurança
# - Logs de auditoria para operações sensíveis